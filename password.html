<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MemoQuest 密碼輸入</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <style>
    .keypad-button {
      text-shadow: 0 0 5px #00AAFF, 0 0 10px #00AAFF;
      box-shadow: 0 0 2px #00AAFF, inset 0 0 2px #00AAFF;
    }
    .display-digit {
      font-family: 'Digital-7', monospace;
      color: #00AAFF;
      text-shadow: 0 0 5px #00AAFF;
      transition: all 0.3s ease;
    }
  </style>
</head>
<body class="flex justify-center items-center min-h-screen bg-gray-900">
  <div class="relative w-[320px] h-[600px] bg-[#2A2A25] rounded-[40px] overflow-hidden shadow-2xl">
    
    <!-- 顯示輸入欄位 -->
    <div class="mt-[60px] flex justify-center space-x-2">
      <div id="digit-1" class="w-[60px] h-[6px] bg-gray-500 rounded display-digit flex items-center justify-center"></div>
      <div id="digit-2" class="w-[60px] h-[6px] bg-gray-500 rounded display-digit flex items-center justify-center"></div>
      <div id="digit-3" class="w-[60px] h-[6px] bg-gray-500 rounded display-digit flex items-center justify-center"></div>
      <div id="digit-4" class="w-[60px] h-[6px] bg-gray-500 rounded display-digit flex items-center justify-center"></div>
    </div>

    <!-- 鍵盤區 -->
    <div class="mt-6 flex justify-center">
      <div class="w-[220px] h-[280px] bg-[#3A3A35] rounded-lg p-4 relative overflow-hidden">
        <div class="absolute inset-0 bg-black opacity-20 z-0 bg-opacity-30"></div>

        <!-- LED -->
        <div class="flex justify-start space-x-4 mb-4 relative z-10">
          <div id="led-red" class="w-4 h-4 rounded-full bg-[#FF3300] shadow-lg shadow-[#FF3300]/50"></div>
          <div id="led-white" class="w-4 h-4 rounded-full bg-[#FFFFCC] shadow-lg shadow-[#FFFFCC]/50"></div>
          <div id="led-green" class="w-4 h-4 rounded-full bg-[#33CC33] shadow-lg shadow-[#33CC33]/50"></div>
        </div>

        <!-- 數字鍵 -->
        <div class="grid grid-cols-3 gap-3 relative z-10">
          ${[1,2,3,4,5,6,7,8,9,'*',0,'#'].map(v => `
            <button class="keypad-button h-12 bg-[#0066CC] border-2 border-[#00AAFF] rounded text-white font-bold text-xl" data-value="${v}">${v}</button>
          `).join('')}
        </div>

        <div class="mt-3 h-6 bg-[#1A1A15] rounded-sm w-full relative z-10"></div>
      </div>
    </div>

    <!-- LOGO -->
    <div class="absolute bottom-6 w-full flex justify-center">
      <img src="IMG_4112.png" alt="MemoQuest Logo" class="w-40" />
    </div>
  </div>

  <script>
    const correctPassword = "2580";
    let currentPosition = 0;
    const displayDigits = [
      document.getElementById('digit-1'),
      document.getElementById('digit-2'),
      document.getElementById('digit-3'),
      document.getElementById('digit-4')
    ];
    const redLed = document.getElementById('led-red');
    const whiteLed = document.getElementById('led-white');
    const greenLed = document.getElementById('led-green');

    document.querySelectorAll('.keypad-button').forEach(button => {
      button.addEventListener('mousedown', () => {
        const value = button.getAttribute('data-value');
        button.style.transform = 'scale(0.95)';
        button.style.boxShadow = '0 0 5px #00AAFF, inset 0 0 5px #00AAFF';

        if (value === '#') {
          clearDisplay();
          flashLed(redLed, '#FF3300');
        } else if (!isNaN(parseInt(value)) || value === '*') {
          updateDisplay(value);
          flashLed(greenLed, '#33CC33');
        }
      });

      button.addEventListener('mouseup', () => {
        button.style.transform = 'scale(1)';
        button.style.boxShadow = '0 0 2px #00AAFF, inset 0 0 2px #00AAFF';
      });

      button.addEventListener('mouseleave', () => {
        button.style.transform = 'scale(1)';
        button.style.boxShadow = '0 0 2px #00AAFF, inset 0 0 2px #00AAFF';
      });
    });

    function updateDisplay(value) {
      if (currentPosition >= displayDigits.length) clearDisplay();

      const digit = displayDigits[currentPosition];
      digit.innerHTML = value;
      digit.style.height = '30px';
      digit.style.backgroundColor = 'transparent';
      digit.style.fontSize = '24px';
      currentPosition++;

      if (currentPosition >= displayDigits.length) {
        const entered = displayDigits.map(d => d.innerHTML).join("");
        if (entered === correctPassword) {
          flashLed(whiteLed, '#FFFFCC');
          setTimeout(() => {
            window.location.href = "next.html";
          }, 500);
        } else {
          flashLed(redLed, '#FF3300');
          setTimeout(clearDisplay, 500);
        }
      }
    }

    function clearDisplay() {
      displayDigits.forEach(digit => {
        digit.innerHTML = '';
        digit.style.height = '6px';
        digit.style.backgroundColor = '#6B7280';
      });
      currentPosition = 0;
    }

    function flashLed(led, color) {
      led.style.opacity = '1';
      led.style.boxShadow = `0 0 10px ${color}, 0 0 20px ${color}`;
      setTimeout(() => {
        led.style.opacity = '0.7';
        led.style.boxShadow = `0 0 5px ${color}`;
      }, 300);
    }
  </script>
</body>
</html>

